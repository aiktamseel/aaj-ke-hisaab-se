<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aaj Ke Hisaab Se - PK Inflation Adjusted Calculators</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Calculate inflation-adjusted values for Pakistani Rupee (PKR) with easy-to-use calculators. Convert historical amounts to present value and calculate inflation-adjusted returns.">
    <meta name="keywords" content="inflation, consumer price index, Pakistan inflation, rupee value, inflation adjusted returns, historical value calculator">
    <meta name="author" content="Tamseel Ahmad">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Aaj Ke Hisaab Se - PK Inflation Adjusted Calculators">
    <meta property="og:description" content="Calculate inflation-adjusted values for Pakistani Rupee (PKR) with easy-to-use calculators.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://pkr.tamseel.pk">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Aaj Ke Hisaab Se - PK Inflation Adjusted Calculators">
    <meta name="twitter:description" content="Calculate inflation-adjusted values for Pakistani Rupee (PKR) with easy-to-use calculators.">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://pkr.tamseel.pk">

    <style>
        body {text-align: center;}
        .info {margin-top: 30px; padding: 15px; border: 1px solid #ccc; display:inline-block;}
        input[type="number"] {width: 80px;}
        select {width: 90px;}
        table { border-spacing: 20px 0; margin:auto}
        #historicInput { display: flex; align-items: center; gap: 20px; width:fit-content; margin:0 auto;}
    </style>
    
</head>
<body>
    <h1>Aaj Ke Hisaab Se</h1>
    
    <h2>Inflation Adjusted Returns Calculator</h2>
    <div>
        <table>
            <tr>
                <td>Amount Invested: </td>
                <td>Rs. <input type="number" id="amountInvested" value="1000"></td>
            </tr>
            <tr>
                <td>Investment Date: </td>
                <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<select id="investmentDate"></select></td>
            </tr>
            <tr>
                <td>End Date: </td>
                <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<select id="endDate"></select></td>
            </tr>
            <tr>
                <td>End Value: </td>
                <td>Rs. <input type="number" id="endValue" value="100000"></td>
            </tr>
            <tr>
                <td>Income/Dividend: </td>
                <td>Rs. <input type="number" id="incomeDividend" value="0"></td>
            </tr>
            <tr>
                <td>Period: </td>
                <td id="investmentPeriod">-</td>
            </tr>
        </table>

        
        <div class="info">
            <table>
                <tr>
                    <th>Return</th>
                    <th>Nominal</th>
                    <th>Inflation Adjusted</th>
                </tr>
                <tr>
                    <td>Annualized</td>
                    <td id="annualizedReturn">-</td>
                    <td id="inflationAdjustedAnnualized">-</td>
                </tr>
                <tr>
                    <td>Absolute</td>
                    <td id="absoluteReturn">-</td>
                    <td id="inflationAdjustedAbsolute">-</td>
                </tr>
            </table>
        </div>
    </div>

    <h2>PKR Historic to Present Value Converter</h2>
    <div>
        Mode: 
        <input type="radio" id="yearly" name="mode" value="yearly" checked>
        <label for="yearly">Yearly</label>
        <input type="radio" id="monthly" name="mode" value="monthly">
        <label for="monthly">Monthly</label>
    </div>
    
    <br>
    
    <div id="historicInput">
        <div>
            Rs. <input type="number" id="leftAmount" value="100">
            <br>
            &nbsp;in &nbsp;<select id="leftPeriod"></select>
        </div>
        
        <div style="font-size: x-large; font-weight: 700;">≈</div>
        
        <div>
            Rs. <input type="number" id="rightAmount" value="">
            <br>
            &nbsp;in &nbsp;<select id="rightPeriod"></select>
        </div>
    </div>

    <div class="info">
        <table>
            <tr>
                <td>Base Year: </td>
                <td id="baseYear">-</td>
            </tr>
            <tr>
                <td>CPI (<span id="t1Period"></span>): </td>
                <td id ="t1CPI">-</td>
            </tr>
            <tr>
                <td>CPI (<span id="t2Period"></span>): </td>
                <td id="t2CPI">-</td>
            </tr>
            <tr>
                <td>Absolute %∆: </td>
                <td id="absoluteChange">-</td>
            </tr>
            <tr>
                <td>Annualized %∆: </td>
                <td id="annualizedChange">-</td>
            </tr>
        </table>
        <p>Formula: Adjusted Amount = Original Amount × (T2 CPI / T1 CPI)</p>
    </div>

    <br><br><br><br><br>
    <small>Last Updated: <span id="lastUpdated"></span> | For queries, contact at tamseel.dev@gmail.com</small>




    <script>
        let cpiData = null;
        let currentMode = 'yearly';

        // Load CPI data
        fetch('pk-cpi.json')
            .then(response => response.json())
            .then(data => {
                cpiData = data;
                populateDropdowns();
                populateReturnDropdowns();
                calculate('left');
                calculateReturns();
            });

        // Get DOM elements
        const leftAmount = document.getElementById('leftAmount');
        const rightAmount = document.getElementById('rightAmount');
        const leftPeriod = document.getElementById('leftPeriod');
        const rightPeriod = document.getElementById('rightPeriod');
        const yearlyRadio = document.getElementById('yearly');
        const monthlyRadio = document.getElementById('monthly');

        // Mode change listeners
        yearlyRadio.addEventListener('change', () => {
            if (yearlyRadio.checked) {
                currentMode = 'yearly';
                populateDropdowns();
                calculate('left');
            }
        });

        monthlyRadio.addEventListener('change', () => {
            if (monthlyRadio.checked) {
                currentMode = 'monthly';
                populateDropdowns();
                calculate('left');
            }
        });

        // Input listeners
        leftAmount.addEventListener('input', () => calculate('left'));
        leftPeriod.addEventListener('change', () => calculate('left'));
        rightAmount.addEventListener('input', () => calculate('right'));
        rightPeriod.addEventListener('change', () => calculate('right'));

        function populateDropdowns() {
            if (!cpiData) return;

            const periods = Object.keys(cpiData[currentMode]).sort();
            
            // Clear and populate left dropdown
            leftPeriod.innerHTML = '';
            rightPeriod.innerHTML = '';
            
            periods.forEach(period => {
                const option1 = document.createElement('option');
                option1.value = period;
                option1.textContent = period;
                leftPeriod.appendChild(option1);
                
                const option2 = document.createElement('option');
                option2.value = period;
                option2.textContent = period;
                rightPeriod.appendChild(option2);
            });

            // Set default selections
            if (periods.length > 1) {
                leftPeriod.value = periods[0];
                rightPeriod.value = periods[periods.length - 1];
            }

            // Last Updated
            document.getElementById('lastUpdated').textContent = cpiData?.metadata?.lastUpdated ?? null;
;
        }

        function calculate(source) {
            if (!cpiData) return;

            const leftCPI = cpiData[currentMode][leftPeriod.value];
            const rightCPI = cpiData[currentMode][rightPeriod.value];

            if (!leftCPI || !rightCPI) return;

            if (source === 'left') {
                const leftValue = parseFloat(leftAmount.value) || 0;
                const rightValue = leftValue * (rightCPI / leftCPI);
                rightAmount.value = rightValue.toFixed(2);
            } else {
                const rightValue = parseFloat(rightAmount.value) || 0;
                const leftValue = rightValue * (leftCPI / rightCPI);
                leftAmount.value = leftValue.toFixed(2);
            }

            updateTechnicalDetails(leftCPI, rightCPI);
        }

        function updateTechnicalDetails(leftCPI, rightCPI) {
            
            const baseYear = cpiData.metadata.baseYear;
            const leftPeriodValue = leftPeriod.value;
            const rightPeriodValue = rightPeriod.value;
            
            // Determine which is earlier (t1) and which is later (t2)
            let t1Period, t2Period, t1CPI, t2CPI;
            
            if (currentMode === 'yearly') {
                if (parseInt(leftPeriodValue) <= parseInt(rightPeriodValue)) {
                    t1Period = leftPeriodValue;
                    t2Period = rightPeriodValue;
                    t1CPI = leftCPI;
                    t2CPI = rightCPI;
                } else {
                    t1Period = rightPeriodValue;
                    t2Period = leftPeriodValue;
                    t1CPI = rightCPI;
                    t2CPI = leftCPI;
                }
            } else {
                // For monthly data, compare as dates
                const leftDate = new Date(leftPeriodValue + '-01');
                const rightDate = new Date(rightPeriodValue + '-01');
                
                if (leftDate <= rightDate) {
                    t1Period = leftPeriodValue;
                    t2Period = rightPeriodValue;
                    t1CPI = leftCPI;
                    t2CPI = rightCPI;
                } else {
                    t1Period = rightPeriodValue;
                    t2Period = leftPeriodValue;
                    t1CPI = rightCPI;
                    t2CPI = leftCPI;
                }
            }

            if (!t1CPI || !t2CPI) {
                document.getElementById('baseYear').textContent = '-';
                document.getElementById('t1Period').textContent = '-';
                document.getElementById('t2Period').textContent = '-';
                document.getElementById('t1CPI').textContent = '-';
                document.getElementById('t2CPI').textContent = '-';
                document.getElementById('absoluteChange').textContent = '-';
                document.getElementById('annualizedChange').textContent = '-';
            }
            
            const absoluteChange = Math.round((t2CPI - t1CPI) / t1CPI * 100);
            
            let annualizedChange = 0;
            if (currentMode === 'yearly') {
                const years = parseInt(t2Period) - parseInt(t1Period);
                if (years > 0) {
                    annualizedChange = (Math.pow(t2CPI / t1CPI, 1 / years) - 1) * 100;
                    annualizedChange = annualizedChange.toFixed(2);
                }
            } else {
                // For monthly data, calculate years between periods
                const [year1, month1] = t1Period.split('-').map(Number);
                const [year2, month2] = t2Period.split('-').map(Number);
                const months = (year2 - year1) * 12 + (month2 - month1);
                const years = months / 12;
                if (years > 0) {
                    annualizedChange = (Math.pow(t2CPI / t1CPI, 1 / years) - 1) * 100;
                    annualizedChange = annualizedChange.toFixed(2);
                }
            }

            

            //Update Values
            document.getElementById('baseYear').textContent = baseYear;
            document.getElementById('t1Period').textContent = t1Period;
            document.getElementById('t2Period').textContent = t2Period;
            document.getElementById('t1CPI').textContent = t1CPI;
            document.getElementById('t2CPI').textContent = t2CPI;
            document.getElementById('absoluteChange').textContent = absoluteChange + '%';
            document.getElementById('annualizedChange').textContent = annualizedChange + '%';

        }

        // Get return calculator elements
        const amountInvested = document.getElementById('amountInvested');
        const investmentDate = document.getElementById('investmentDate');
        const endDate = document.getElementById('endDate');
        const endValue = document.getElementById('endValue');
        const incomeDividend = document.getElementById('incomeDividend');

        // Add event listeners for return calculator
        amountInvested.addEventListener('input', calculateReturns);
        investmentDate.addEventListener('change', calculateReturns);
        endDate.addEventListener('change', calculateReturns);
        endValue.addEventListener('input', calculateReturns);
        incomeDividend.addEventListener('input', calculateReturns);

        function populateReturnDropdowns() {
            if (!cpiData) return;
            
            const periods = Object.keys(cpiData.monthly).sort();
            
            // Clear and populate dropdowns
            investmentDate.innerHTML = '';
            endDate.innerHTML = '';
            
            periods.forEach(period => {
                const option1 = document.createElement('option');
                option1.value = period;
                option1.textContent = period;
                investmentDate.appendChild(option1);
                
                const option2 = document.createElement('option');
                option2.value = period;
                option2.textContent = period;
                endDate.appendChild(option2);
            });
            
            // Set default selections
            if (periods.length > 1) {
                investmentDate.value = periods[0];
                endDate.value = periods[periods.length - 1];
            }
        }

        function calculateReturns() {
            if (!cpiData) return;
            
            const V0 = parseFloat(amountInvested.value) || 0;
            const VT = parseFloat(endValue.value) || 0;
            const income = parseFloat(incomeDividend.value) || 0;
            
            const startPeriod = investmentDate.value;
            const endPeriod = endDate.value;
            
            const CPI0 = cpiData.monthly[startPeriod];
            const CPIT = cpiData.monthly[endPeriod];
            
            if (!CPI0 || !CPIT || V0 === 0) {
                document.getElementById('investmentPeriod').textContent = '-';
                document.getElementById('absoluteReturn').textContent = '-';
                document.getElementById('inflationAdjustedAbsolute').textContent = '-';
                document.getElementById('annualizedReturn').textContent = '-';
                document.getElementById('inflationAdjustedAnnualized').textContent = '-';
                return;
            }
            
            // Calculate time period in months (inclusive of both ends)
            const [startYear, startMonth] = startPeriod.split('-').map(Number);
            const [endYear, endMonth] = endPeriod.split('-').map(Number);
            const T = (endYear - startYear) * 12 + (endMonth - startMonth) + 1;
            
            // Total final value including income/dividend
            const totalFinalValue = VT + income;
            
            // Absolute Return = VT/V0 - 1
            const absoluteReturn = (totalFinalValue / V0) - 1;
            
            // Annualized Return = (VT/V0)^(12/T) - 1
            const annualizedReturn = T > 0 ? Math.pow(totalFinalValue / V0, 12 / T) - 1 : 0;
            
            // Inflation Adjusted Absolute Return = (VT/V0)/(CPIT/CPI0) - 1
            const inflationAdjustedAbsolute = (totalFinalValue / V0) / (CPIT / CPI0) - 1;
            
            // Inflation Adjusted Annualized Return = ((VT/V0)/(CPIT/CPI0))^(12/T) - 1
            const inflationAdjustedAnnualized = T > 0 ? Math.pow((totalFinalValue / V0) / (CPIT / CPI0), 12 / T) - 1 : 0;
            
            // Display results
            document.getElementById('investmentPeriod').textContent = T + ' months (' + (T/12).toFixed(1) + ' years)';
            document.getElementById('absoluteReturn').textContent = Math.round(absoluteReturn * 100) + '%';
            document.getElementById('inflationAdjustedAbsolute').textContent = Math.round(inflationAdjustedAbsolute * 100) + '%';
            document.getElementById('annualizedReturn').textContent = (annualizedReturn * 100).toFixed(2) + '%';
            document.getElementById('inflationAdjustedAnnualized').textContent = (inflationAdjustedAnnualized * 100).toFixed(2) + '%';
        }
    </script>
</body>
</html>
